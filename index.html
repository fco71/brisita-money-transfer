<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Brisita - International Money Transfer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="favicon.svg" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="top-nav">
    <div class="brand">
      <span class="brand-mark">B</span>
      <span class="brand-text">Brisita</span>
    </div>
    <nav class="nav-actions">
      <button id="login-btn" class="nav-btn ghost">Sign In</button>
      <button id="signup-btn" class="nav-btn primary">Get Started</button>

      <div id="user-menu" class="user-menu">
        <div id="user-avatar" class="avatar">U</div>
        <button id="logout-btn" class="nav-btn ghost small">Sign Out</button>
      </div>
    </nav>
  </header>

  <main>
    <!-- AUTH SECTION -->
    <section id="auth-section" class="auth-section">
      <div class="hero-copy">
        <h1>Send money globally with blockchain security</h1>
        <p class="hero-sub">
          Fast, secure, and transparent international transfers powered by
          cutting-edge blockchain rails ‚Äî without the crypto confusion.
        </p>

        <div class="hero-pills">
          <div class="pill">
            <span class="pill-emoji">‚ö°</span>
            <div>
              <h3>Instant</h3>
              <p>Transfers settle in seconds.</p>
            </div>
          </div>
          <div class="pill">
            <span class="pill-emoji">üîí</span>
            <div>
              <h3>Secure</h3>
              <p>Backed by blockchain transparency.</p>
            </div>
          </div>
          <div class="pill">
            <span class="pill-emoji">üí∏</span>
            <div>
              <h3>Low fees</h3>
              <p>No hidden FX surprises.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="auth-card card">
        <h2 id="auth-title">Get Started</h2>
        <p class="card-subtitle">Create your account to start sending money.</p>

        <form id="auth-form" class="auth-form">
          <label class="field">
            <span>Email</span>
            <input id="email" type="email" autocomplete="email" required />
          </label>

          <label class="field">
            <span>Password</span>
            <input
              id="password"
              type="password"
              autocomplete="current-password"
              required
            />
          </label>

          <button id="auth-submit" type="submit" class="btn full">
            Create Account
          </button>
        </form>

        <p class="auth-toggle">
          <span id="toggle-text">Already have an account?</span>
          <button id="toggle-auth" class="link">Sign in</button>
        </p>
      </div>
    </section>

    <!-- APP SECTION -->
    <section id="app-section" class="app-section" style="display: none">
      <!-- DASHBOARD HEADER -->
      <section class="grid-two">
        <div class="card balance-card">
          <div class="card-header">
            <div>
              <h3>Available Balance</h3>
              <p class="card-subtitle">Your primary account in USD-equivalent.</p>
            </div>
          </div>
          <div class="balance-main">
            <h1 id="balance" class="balance-amount">$0.00</h1>
            <span class="balance-currency">USD</span>
          </div>
          <div class="balance-footer">
            <button id="wallet-connect-btn" class="btn ghost">
              Connect Wallet
            </button>
            <div class="stats-inline">
              <div>
                <p class="stat-label">This Month</p>
                <p id="total-amount" class="stat-value">$0.00</p>
              </div>
              <div>
                <p class="stat-label">Transactions</p>
                <p id="tx-count" class="stat-value">0</p>
              </div>
            </div>
          </div>
        </div>

        <div class="card analytics-card">
          <div class="card-header">
            <div>
              <h3>Analytics</h3>
              <p class="card-subtitle">Activity overview for your account.</p>
            </div>
            <div class="tabs">
              <button class="tab active">Last 7 days</button>
              <button class="tab">Last 30 days</button>
              <button class="tab">Last 90 days</button>
              <button class="tab">Last year</button>
            </div>
          </div>
          <div class="charts-grid">
            <div class="chart-card">
              <h4>Transaction Volume</h4>
              <canvas id="volume-chart"></canvas>
            </div>
            <div class="chart-card">
              <h4>Currency Distribution</h4>
              <canvas id="currency-chart"></canvas>
            </div>
            <div class="chart-card">
              <h4>Transaction History</h4>
              <canvas id="history-chart"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- SEND MONEY + BREAKDOWN -->
      <section class="grid-two">
        <!-- SEND MONEY CARD -->
        <section class="card send-card">
          <div class="card-header">
            <div>
              <h3>Send Money</h3>
              <p class="card-subtitle">
                Choose how much to send and where it lands.
              </p>
            </div>
          </div>

          <form id="transfer-form" class="transfer-form">
            <label class="field">
              <span>Amount to Send</span>
              <div class="field-group">
                <span class="field-prefix">$</span>
                <input
                  id="amount"
                  type="number"
                  min="0"
                  step="0.01"
                  placeholder="0.00"
                  required
                />
                <select id="from-currency">
                  <option value="USD">USD</option>
                  <option value="EUR">EUR</option>
                  <option value="GBP">GBP</option>
                  <option value="JPY">JPY</option>
                  <option value="CAD">CAD</option>
                  <option value="MXN">MXN</option>
                  <option value="DOP">DOP</option>
                </select>
              </div>
            </label>

            <div class="swap-row">
              <button type="button" id="swap-currencies" class="icon-btn">
                ‚áÖ
              </button>
              <span class="swap-label">Switch direction</span>
            </div>

            <label class="field">
              <span>Recipient gets</span>
              <div class="field-group">
                <span id="receive-amount">0.00</span>
                <select id="to-currency">
                  <option value="EUR">EUR</option>
                  <option value="USD">USD</option>
                  <option value="GBP">GBP</option>
                  <option value="JPY">JPY</option>
                  <option value="MXN">MXN</option>
                  <option value="DOP">DOP</option>
                </select>
              </div>
            </label>

            <div class="meta-row">
              <span>Exchange rate</span>
              <span id="exchange-rate">1.0000</span>
            </div>

            <label class="field">
              <span>Recipient Wallet Address</span>
              <div class="field-group">
                <input
                  id="recipient-address"
                  type="text"
                  placeholder="0x or wallet ID"
                  required
                />
                <button
                  type="button"
                  id="open-saved-wallets"
                  class="btn ghost small"
                >
                  Saved
                </button>
              </div>
            </label>

            <div class="summary">
              <div class="summary-row">
                <span>Amount</span>
                <span id="send-amount">$0.00</span>
              </div>
              <div class="summary-row">
                <span>Blockchain Fee</span>
                <span>$2.50</span>
              </div>
              <div class="summary-row total">
                <span>Total</span>
                <span id="total-amount-display">$2.50</span>
              </div>
            </div>

            <button type="submit" class="btn full">Send Money</button>
          </form>
        </section>

        <!-- BREAKDOWN CARD -->
        <section id="breakdown-section" class="card flow-card">
          <div class="card-header">
            <div>
              <h3>How this transfer works</h3>
              <p class="card-subtitle">
                We use crypto rails under the hood. Here‚Äôs every step, fee, and
                conversion.
              </p>
            </div>
            <span class="tag tag-demo">Demo flow ¬∑ Simulated</span>
          </div>

          <ol class="flow-steps">
            <li class="flow-step">
              <div class="flow-step-header">
                <span class="step-badge">1</span>
                <div>
                  <h4>
                    Local deposit (<span id="step1-local-code">DOP</span>)
                  </h4>
                  <p class="step-label" id="step1-label">
                    You fund your Brisita balance in Dominican pesos.
                  </p>
                </div>
              </div>
              <div class="step-rows">
                <div class="step-row">
                  <span
                    class="has-tooltip"
                    data-tooltip="This is the amount you must load in your local currency so the recipient can get the full amount after all crypto steps and fees."
                  >
                    Amount you deposit
                  </span>
                  <span id="step1-local-amount">RD$ 0.00</span>
                </div>
                <div class="step-row muted">
                  <span
                    class="has-tooltip"
                    data-tooltip="Any charge from your local bank or payment provider for funding your Brisita balance. In this demo we keep it at zero."
                  >
                    Local bank / payment fee
                  </span>
                  <span id="step1-local-fee">RD$ 0.00</span>
                </div>
              </div>
            </li>

            <li class="flow-step">
              <div class="flow-step-header">
                <span class="step-badge">2</span>
                <div>
                  <h4>Convert local ‚Üí crypto</h4>
                  <p class="step-label">
                    We buy BTC/USDC with your local currency via a regulated
                    exchange.
                  </p>
                </div>
              </div>
              <div class="step-rows">
                <div class="step-row">
                  <span
                    class="has-tooltip"
                    data-tooltip="This is the estimated amount of crypto we purchase to cover the recipient‚Äôs funds, all fees, and a small safety buffer."
                  >
                    Crypto purchased
                  </span>
                  <span id="step2-crypto-amount">0.00000000 BTC</span>
                </div>
                <div class="step-row muted">
                  <span
                    class="has-tooltip"
                    data-tooltip="Commission paid to the local exchange for buying crypto on your behalf. In this demo we use a simple flat fee."
                  >
                    Exchange fee
                  </span>
                  <span id="step2-crypto-fee">‚Ç¨ 0.00</span>
                </div>
              </div>
            </li>

            <li class="flow-step">
              <div class="flow-step-header">
                <span class="step-badge">3</span>
                <div>
                  <h4>On-chain transfer</h4>
                  <p class="step-label">
                    We send crypto across the blockchain to our partner in the
                    destination country.
                  </p>
                </div>
              </div>
              <div class="step-rows">
                <div class="step-row">
                  <span
                    class="has-tooltip"
                    data-tooltip="Network fees (gas) paid to validators/miners so the transfer is processed on-chain. These are usually small and depend on the blockchain used."
                  >
                    Network / gas fee
                  </span>
                  <span id="step3-network-fee">‚Ç¨ 0.00</span>
                </div>
              </div>
            </li>

            <li class="flow-step">
              <div class="flow-step-header">
                <span class="step-badge">4</span>
                <div>
                  <h4>Crypto ‚Üí payout</h4>
                  <p class="step-label">
                    Our partner converts the crypto back to local currency and
                    sends it to the recipient.
                  </p>
                </div>
              </div>
              <div class="step-rows">
                <div class="step-row">
                  <span
                    class="has-tooltip"
                    data-tooltip="The final amount in the recipient‚Äôs currency that we commit to deliver, assuming no unexpected delays or market interruptions."
                  >
                    Recipient will receive
                  </span>
                  <span id="step4-rec-amount">‚Ç¨ 0.00</span>
                </div>
                <div class="step-row">
                  <span
                    class="has-tooltip"
                    data-tooltip="Our flat service fee for orchestrating the whole flow: local collection, crypto conversion, transfer, and payout."
                  >
                    Brisita flat fee
                  </span>
                  <span id="step4-platform-fee">‚Ç¨ 0.00</span>
                </div>
                <div class="step-row warning">
                  <span
                    class="has-tooltip"
                    data-tooltip="Extra margin to protect the transfer against small price movements between the moment you confirm and the moment the crypto legs settle."
                  >
                    Rate buffer required
                  </span>
                  <span id="step4-buffer">‚Ç¨ 0.00</span>
                </div>
              </div>
            </li>
          </ol>

          <div class="flow-footer">
            <div class="flow-note">
              <strong>Heads up:</strong> This is a simulated demo flow. In
              production, every value updates in real-time based on partner
              fees, live crypto prices, and FX spreads.
            </div>
          </div>
        </section>
      </section>

      <!-- RECENT TRANSACTIONS -->
      <section class="card">
        <div class="card-header">
          <div>
            <h3>Recent Transactions</h3>
            <p class="card-subtitle">
              Your latest transfers and their blockchain status.
            </p>
          </div>
        </div>
        <ul id="transaction-list" class="tx-list">
          <li class="tx-empty">
            <p>No transactions yet</p>
            <p class="tx-empty-sub">
              Your transfer history will appear here once you send money.
            </p>
          </li>
        </ul>
      </section>
    </section>
  </main>

  <!-- CONFIRMATION MODAL -->
  <div id="confirmation-modal" class="modal-overlay" style="display: none">
    <div class="modal card">
      <div class="modal-header">
        <h3>Confirm Transfer</h3>
        <button
          type="button"
          class="icon-btn"
          id="close-confirmation-modal"
          aria-label="Close"
        >
          √ó
        </button>
      </div>
      <div class="modal-body">
        <div class="modal-row">
          <span>From</span>
          <span id="confirm-from-currency">0.00 USD</span>
        </div>
        <div class="modal-row">
          <span>To</span>
          <span id="confirm-to-currency">EUR</span>
        </div>
        <div class="modal-row">
          <span>Amount to Send</span>
          <span id="confirm-send-amount">0.00</span>
        </div>
        <div class="modal-row">
          <span>Recipient Gets</span>
          <span id="confirm-receive-amount">0.00</span>
        </div>
        <div class="modal-row">
          <span>Exchange Rate</span>
          <span id="confirm-rate">1.00</span>
        </div>
        <div class="modal-row">
          <span>Recipient Address</span>
          <span id="confirm-address">-</span>
        </div>
        <div class="modal-row total">
          <span>Total (incl. fees)</span>
          <span id="confirm-total">$0.00</span>
        </div>

        <div class="modal-warning">
          <span class="pill-emoji">‚ö†Ô∏è</span>
          <p>
            Please verify all details carefully. Cryptocurrency-backed transfers
            may not be reversible once confirmed.
          </p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn ghost" id="cancel-transfer-btn">
          Cancel
        </button>
        <button type="button" class="btn" id="confirm-transfer-btn">
          Confirm &amp; Send
        </button>
      </div>
    </div>
  </div>

  <!-- NOTIFICATION TOAST -->
  <div id="notification" class="notification"></div>

  <!-- SCRIPTS -->
  <!-- Firebase (compat libraries) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore-compat.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Your Firebase config + blockchain helpers + app logic -->
  <script src="firebase-config.js"></script>
  <script src="blockchain.js"></script>
  <script src="app.js"></script>
</body>
</html>
